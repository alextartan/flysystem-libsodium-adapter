sudo: false
language: php
cache:
  directories:
  - $HOME/.composer/cache
matrix:
  include:
  - php: 7.2
    env:
    - CS_CHECK=true
    - TEST_COVERAGE=true
    - PHPSTAN=true
  - php: 7.3
    env:
    - CS_CHECK=false
    - TEST_COVERAGE=false
    - PHPSTAN=false
before_install:
- if [[ $TEST_COVERAGE != 'true' ]]; then phpenv config-rm xdebug.ini || return 0 ; fi
- travis_retry composer self-update
install:
- travis_retry composer install --no-interaction --ignore-platform-reqs
- stty cols 120
- export COLUMNS=120
- composer show
script:
- if [[ $TEST_COVERAGE == 'true' ]]; then composer test-coverage && composer test-infection ; else composer test ; fi
#- if [[ $CS_CHECK == 'true' ]]; then composer cs-check ; fi
- if [[ $PHPSTAN == 'true' ]]; then composer phpstan ; fi
after_script:
- if [[ $TEST_COVERAGE == 'true' ]]; then composer upload-coverage ; fi
notifications:
  email: false
env:
  global:
    secure: QOdLLAUC5pg+j0EPxdCv3Bg1T91poVXiyxhX8nYUtZM35RmF8aqmQ8ffr58llbO7W1e0bnEl4vqTMBgpoZWb4DqL5YpcuQ6/BPjE+4l9ah4jTRAK/Umdtrs+RLLErmytgEt1TeS/hIXS0U7vahIhLrFNhHaQ779tLtDMc+tflQ4ml9u2prWn57A9YpqcD+yf44gBdR8TdPi7TLKALAYkXxNSroPHYEUJwQ7QgRh0/VHcAq3qhjSJRLXUcDyQEMtnsMgVoRqrxK5Xh6LxVvcBHUyLo2nmixEP0mjKg80KJMxvRKv//J7Njz+NdDJoSXgHiPDguiOs4vBQvvn+WPT6w4vU7qClMXo6Rr/xgoWedUk84ArVF3D5Et6sHS0CghSb5AcUOJfEazOFt2zsgb8+eI7kVLwYimDLOGWjhTslzHvb9ZVr6sky2j3GT34aWFzPaU+BBJ2Xgf+EKENygCePWgXA5JFQHkm1tbAVciGpefL9eK1ktsYMP+z0YS6Evdqq/imU8qWqrAAVDnNKKds6zYDYeXqP11wRokB1yWwBSSnoIBEB31mMOUUHTLcQRa82m6ORi4dyfPgdrddRsIGPlIpebYCjxb4nZ2ICUKGXxu+/u6oTv1Y73slWL8OxJOVNkksLWjLoGpe+J40MQ1DUzRuxLO7MQmMxJxvd+3geeqA=


